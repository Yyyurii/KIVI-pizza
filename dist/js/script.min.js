window.onload=function(){document.addEventListener("click",(function(t){const s=t.target;window.innerWidth>768&&isMobile.any()&&(s.classList.contains("menu__arrow")&&s.closest(".menu__item").classList.toggle("_hover"),!s.closest(".menu__item")&&document.querySelectorAll(".menu__item._hover").length>0&&_removeClasses(document.querySelectorAll(".menu__item._hover"),"_hover"));s.classList.contains("search-form__icon")?document.querySelector(".search-form").classList.toggle("_active"):!s.closest(".search-form")&&document.querySelector(".search-form._active")&&document.querySelector(".search-form").classList.remove("_active");s.classList.contains("products__more")&&(!async function(t){if(!t.classList.contains("_hold")){t.classList.add("_hold");const e="json/products.json";let s=await fetch(e,{method:"GET"});if(s.ok){!function(t){const e=document.querySelector(".products__items");t.products.forEach(t=>{const s=t.id,c=t.url,i=t.image,n=t.title,o=t.text,r=t.price,a=t.priceOld,l=t.shareUrl,d=t.likeUrl,_=t.labels;let u=`<article data-pid="${s}" class="products__item item-product">`,m="";if(_){let t='<div class="item-product__labels">',e="</div>",s="";_.forEach(t=>{s+=`<div class="item-product__label item-product__label_${t.type}">${t.value}</div>`}),m+=t,m+=s,m+=e}let p="";p='<div class="item-product__prices">',p+=`<div class="item-product__price">Rp ${r}</div>`,a&&(p+=`<div class="item-product__price item-product__price_old">Rp ${a}</div>`),p+="</div>";let f="";f+='<div class="item-product__body">',f+=`\n\t\t<div class="item-product__content">\n\t\t\t<h3 class="item-product__title">${n}</h3>\n\t\t\t<div class="item-product__text">${o}</div>\n\t\t</div>\n\t`,f+=p,f+=`\n\t\t<div class="item-product__actions actions-product">\n\t\t\t<div class="actions-product__body">\n\t\t\t\t<a href="" class="actions-product__button btn btn_white">Add to cart</a>\n\t\t\t\t<a href="${l}" class="actions-product__link _icon-share">Share</a>\n\t\t\t\t<a href="${d}" class="actions-product__link _icon-favorite">Like</a>\n\t\t\t</div>\n\t\t</div>\n\t`,f+="</div>";let h="";h+=u,h+=m,h+=`\n\t\t<a href="${c}" class="item-product__image _ibg">\n\t\t\t<img src="img/products/${i}" alt="${n}">\n\t\t</a>\n\t`,h+=f,h+="</article>",e.insertAdjacentHTML("beforeend",h)})}(await s.json()),t.classList.remove("_hold"),t.remove()}else alert("Ошибка")}}(s),t.preventDefault());if(s.classList.contains("actions-product__button")){const c=s.closest(".item-product").dataset.pid;!function(t,s){if(!t.classList.contains("_hold")){t.classList.add("_hold"),t.classList.add("_fly");const c=document.querySelector(".cart-header__icon"),i=document.querySelector(`[data-pid="${s}"]`).querySelector(".item-product__image"),n=i.cloneNode(!0),o=i.offsetWidth,r=i.offsetHeight,a=i.getBoundingClientRect().top,l=i.getBoundingClientRect().left;n.setAttribute("class","_flyImage _ibg"),n.style.cssText=`\n\t\t\tleft: ${l}px;\n\t\t\ttop: ${a}px;\n\t\t\twidth: ${o}px;\n\t\t\theight: ${r}px;\n\t\t`,document.body.append(n);const d=c.getBoundingClientRect().left,_=c.getBoundingClientRect().top;n.style.cssText=`\n\t\t\tleft: ${d}px;\n\t\t\ttop: ${_}px;\n\t\t\twidth: 0px;\n\t\t\theight: 0px;\n\t\t\topacity:0;\n\t\t`,n.addEventListener("transitionend",(function(){t.classList.contains("_fly")&&(n.remove(),e(t,s),t.classList.remove("_fly"))}))}}(s,c),t.preventDefault()}s.classList.contains("cart-header__icon")||s.closest(".cart-header__icon")?(document.querySelector(".cart-list").children.length>0&&document.querySelector(".cart-header").classList.toggle("_active"),t.preventDefault()):s.closest(".cart-header")||s.classList.contains("actions-product__button")||document.querySelector(".cart-header").classList.remove("_active");if(s.classList.contains("cart-list__delete")){const c=s.closest(".cart-list__item").dataset.cartPid;e(s,c,!1),t.preventDefault()}}));const t=document.querySelector(".header");function e(t,e,s=!0){const c=document.querySelector(".cart-header"),i=c.querySelector(".cart-header__icon"),n=i.querySelector("span"),o=document.querySelector(`[data-cart-pid="${e}"]`),r=document.querySelector(".cart-list");if(s){if(n?n.innerHTML=++n.innerHTML:i.insertAdjacentHTML("beforeend","<span>1</span>"),o){const t=o.querySelector(".cart-list__quantity span");t.innerHTML=++t.innerHTML}else{const t=document.querySelector(`[data-pid="${e}"]`),s=`\n\t\t\t<a href="" class="cart-list__image _ibg">${t.querySelector(".item-product__image").innerHTML}</a>\n\t\t\t<div class="cart-list__body">\n\t\t\t\t<a href="" class="cart-list__title">${t.querySelector(".item-product__title").innerHTML}</a>\n\t\t\t\t<div class="cart-list__quantity">Quantity: <span>1</span></div>\n\t\t\t\t<a href="" class="cart-list__delete">Delete</a>\n\t\t\t</div>`;r.insertAdjacentHTML("beforeend",`<li data-cart-pid="${e}" class="cart-list__item">${s}</li>`)}t.classList.remove("_hold")}else{const t=o.querySelector(".cart-list__quantity span");t.innerHTML=--t.innerHTML,t.innerHTML||o.remove();const e=--n.innerHTML;e?n.innerHTML=e:(n.remove(),c.classList.remove("_active"))}}new IntersectionObserver((function(e,s){e[0].isIntersecting?t.classList.remove("_scroll"):t.classList.add("_scroll")})).observe(t);const s=document.querySelector(".furniture__body");if(s&&!isMobile.any()){const t=document.querySelector(".furniture__items"),e=document.querySelectorAll(".furniture__column"),i=s.dataset.speed;let n=0,o=0;function c(){let r=0;e.forEach(t=>{r+=t.offsetWidth});const a=r-s.offsetWidth,l=Math.floor(o-n);n+=l*i;let d=a/200*n;t.style.cssText=`transform: translate3d(${-d}px,0,0);`,Math.abs(l)>0?requestAnimationFrame(c):s.classList.remove("_init")}s.addEventListener("mousemove",(function(t){const e=s.offsetWidth,i=t.pageX-e/2;o=i/e*200,s.classList.contains("_init")||(requestAnimationFrame(c),s.classList.add("_init"))}))}};