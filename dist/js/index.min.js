$(".pizza__controls .buttons").click((function(){$(this).addClass("button-active").siblings().removeClass("button-active");let e=$(this).attr("data-filter");"classico"==e?($(".pizza .classico").fadeIn(400),$(".pizza .card").not("."+e).fadeOut(200)):($(".pizza .card").not("."+e).fadeOut(200),$(".pizza .card").filter("."+e).fadeIn(400).css("display","flex"))})),$(".coffee-beans__controls .buttons").click((function(){$(this).addClass("button-active").siblings().removeClass("button-active");let e=$(this).attr("data-filter");"mix"==e?($(".coffee-beans .mix").fadeIn(400),$(".coffee-beans .card").not("."+e).fadeOut(200)):($(".coffee-beans .card").not("."+e).fadeOut(200),$(".coffee-beans .card").filter("."+e).fadeIn(400).css("display","flex"))})),$(window).on("load scroll",(function(){$(window).scrollTop()>60?$("header .header__bottom").addClass("header-active"):$("header .header__bottom").removeClass("header-active"),$("section").each((function(){let e=$(this).height(),t=$(this).offset().top-200,a=$(window).scrollTop(),s=$(this).attr("id");a>=t&&a<t+e&&($(".header__navbar ul li a").removeClass("active"),$(".header__navbar").find(`[href="#${s}"]`).addClass("active"))})),$(window).scrollTop()>0?$("#scroll-up").show():$("#scroll-up").hide()})),$(".scroll-up").on("click",(function(){return $("html, body").animate({scrollTop:0},"slow"),!1}));const $burgerIcon=$(".header__burger");$burgerIcon.click((function(){$(this).toggleClass("_active"),$("body").toggleClass("_stop-scrolling")})),$(".header__bottom a").click(()=>{$burgerIcon.hasClass("_active")&&($burgerIcon.toggleClass("_active"),$("body").toggleClass("_stop-scrolling"))});const $basket=$(".basket");$basket.click((function(){$(".basket__list").toggleClass("_active")}));const loader=document.querySelector(".loader");function documentActions(e){const t=e.target;if(t.classList.contains("basket__btn")){const e=document.querySelector(".order"),t=document.querySelector(".page");if(document.querySelector(".col-2__list").children.length>0)e.classList.add("_active"),t.style.display="none",calcPizzaCost(),totalPrice();else{const e=document.querySelector(".actions p");e.classList.add("_active"),setTimeout(()=>e.classList.remove("_active"),3e3)}}if(t.closest(".header__navbar")||t.closest(".logo")){console.log("header-bottom");const e=document.querySelector(".order"),t=document.querySelector(".page");e.classList.remove("_active"),t.style.display="block"}if(t.classList.contains("card__btn")){const a=t.closest(".pizza__card").dataset.pid;addToCart(t,a),e.preventDefault()}if(t.classList.contains("basket__delete-btn")||t.classList.contains("basket__delete-img")){const a=t.closest(".basket__item").dataset.cartPid;updateCart(t,a,!1),e.preventDefault()}if(t.classList.contains("order__plus-quantity")){const e=t.closest("[data-cart-pid").querySelector(".order__current-quantity");e.innerHTML=++e.innerHTML,calcPizzaCost(),totalPrice()}if(t.classList.contains("order__minus-quantity")){const e=t.closest("[data-cart-pid").querySelector(".order__current-quantity");e.innerHTML>1&&(e.innerHTML=--e.innerHTML,calcPizzaCost(),totalPrice())}}function totalPrice(){const e=document.querySelector(".col-2__price-value"),t=document.querySelectorAll(".basket__price-total-input");let a=[];t.forEach(e=>{a.push(parseInt(e.value))});let s=a.reduce((function(e,t){return e+t}),0);e.innerHTML=s+" грн"}function calcPizzaCost(e){const t=document.querySelectorAll("[data-cart-pid");console.log(t),t.forEach(e=>{const t=e.querySelector(".basket__price").innerHTML,a=e.querySelector(".order__current-quantity").innerHTML;e.querySelector(".basket__price-total-input").value=parseInt(t)*parseInt(a)})}function addToCart(e,t){if(!e.classList.contains("_hold")){e.classList.add("_hold"),e.classList.add("_fly");const a=document.querySelector(".actions__basket"),s=document.querySelector(`[data-pid="${t}"]`).querySelector(".card__img"),n=s.cloneNode(!0),c=s.offsetWidth,i=s.offsetHeight,o=s.getBoundingClientRect().top,r=s.getBoundingClientRect().left;n.setAttribute("class","_flyImage _ibg"),n.style.cssText=`\n    left: ${r}px;\n    top: ${o}px;\n    width: ${c}px;\n    height: ${i}px;\n  `,document.body.append(n);const l=a.getBoundingClientRect().left,d=a.getBoundingClientRect().top;n.style.cssText=`\n    left: ${l}px;\n    top: ${d}px;\n    width: 0px;\n    height: 0px;\n    opacity:0;\n  `,n.addEventListener("transitionend",(function(){e.classList.contains("_fly")&&(n.remove(),updateCart(e,t),e.classList.remove("_fly"))}))}}function updateCart(e,t,a=!0){const s=document.querySelector(".actions"),n=s.querySelector(".basket__icon"),c=s.querySelector("span"),i=document.querySelector(`[data-cart-pid="${t}"]`);if(a){if(c.classList.add("_active"),c?c.innerHTML=++c.innerHTML:n.insertAdjacentHTML("beforeend","<span>1</span>"),i){const e=i.querySelector(".basket__quantity"),t=i.querySelector(".basket__price-total-input");e.innerHTML=++e.innerHTML,t.value=++t.value}else{const e=document.querySelector(".col-2__list"),a=document.querySelector(`[data-pid="${t}"]`),s=a.querySelector(".card__img"),n=a.querySelector(".card__title").innerHTML,c=a.querySelector(".card__price").innerHTML,i=`\n        <div class="basket__item-cont">\n          <div data-cart-pid="${t}" class="basket__item">\n            <img class="basket__item-img" src="${s.attributes.src.nodeValue}" alt="">\n            <div class="basket__details">\n              <input type="hidden" name="pizza_name[]" " value="${n}">\n              <span class="basket__title">${n}</span>\n              <div class="basket__cost">\n                  <input type="hidden" name="pizza_quantity[]" " value="">\n                  <div class="order__quantity">\n                    <div class="order__minus-quantity quantity-img">\n                    </div>\n                    <span class="order__current-quantity basket__quantity">1</span>\n                    <div class="order__plus-quantity quantity-img">\n                    </div>\n                  </div>\n                  <div class="order__multiply">X</div>\n                  <img class="basket__price-img" src="./img/icons/hryvnia-gray.svg" alt="hryvnia">\n                  <span class="basket__price">${c}</span>\n                  <input type="hidden" name="basket__price-total-input" class="basket__price-total-input" value="${c}">\n              </div>\n            </div>\n            <div class="basket__delete-btn">\n                <img class="basket__delete-img" src="./img/icons/close.svg" alt="delete">\n            </div>\n          </div>\n          <hr>\n        </div>\n      `;e.insertAdjacentHTML("beforeend",""+i)}e.classList.remove("_hold")}else{const e=i.querySelector(".basket__quantity"),t=c.innerHTML-e.innerHTML;i.closest(".basket__item-cont").remove(),t?c.innerHTML=t:(c.innerHTML="",c.classList.remove("_active"))}}function checkTypeDelivery(e){const t=document.querySelector(".col-1__toGo-active"),a=document.querySelector(".col-1__delivery-active");(e.target.classList.contains("col-1__delivery-cont_toGo")||e.target.classList.contains("col-1__delivery-toGo-btn")||e.target.classList.contains("col-1__delivery-toGo"))&&(t.classList.add("_active"),a.classList.remove("_active")),(e.target.classList.contains("col-1__delivery-cont_del")||e.target.classList.contains("col-1__delivery-del-btn")||e.target.classList.contains("col-1__delivery-del"))&&(a.classList.add("_active"),t.classList.remove("_active"))}window.addEventListener("load",()=>{loader.classList.add("_hide"),setTimeout(()=>{loader.remove()},600)}),document.addEventListener("click",documentActions),$("#timepicker").timepicker({timeFormat:"HH:mm ",interval:10,minTime:"09:20",maxTime:"21:00",defaultTime:"",startTime:"09:00",dynamic:!1,dropdown:!0,scrollbar:!0,value:this.value}),jQuery(document).ready((function(){$("#phone").mask("+380 (99) 999-99-99"),jQuery(".order__btn").click((function(){var e=jQuery(this).closest("form");if(e.valid()){var t=e.attr("action");jQuery.ajax({url:t,type:"post",dataType:"html",data:e.serialize(),success:function(e){alert("Заявка відправлена")},error:function(){e.find(".status").html("серверная ошибка")}})}}))})),document.querySelector(".col-1__order-type").addEventListener("click",e=>{document.querySelectorAll(".col-1__delivery-cont").forEach(e=>{e.classList.remove("_active")}),e.target.classList.add("_active"),checkTypeDelivery(e)});