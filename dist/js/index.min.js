window.addToCart=addToCart,window.changeNumberOfUnits=changeNumberOfUnits,window.removeItemFromCart=removeItemFromCart;const today=new Date,todayHours=today.getHours(),todayDay=today.getDay(),pizzaContainer=document.querySelector(".pizza__container"),pizzaClassico=document.querySelector(".pizza__classico"),pizzaPremio=document.querySelector(".pizza__premio"),pizzaMaestro=document.querySelector(".pizza__maestro"),cartListContainer=document.querySelector(".basket__item-cont"),totalItemsInCart=document.querySelector(".actions__basket-quantity"),totalPriceInCart=document.querySelector(".col-2__price-value"),deliveryList=document.querySelector(".col-2__list"),order=document.querySelector(".order"),submitOrder=document.querySelectorAll(".order__btn"),inputHiddenField=document.querySelectorAll(".basket__price-total-input");function renderPizza(){[pizzaClassico,pizzaPremio,pizzaMaestro].forEach(e=>{productsPizza.forEach(t=>{e&&e.id===t.class&&(e.innerHTML+=`\n            <div data-pid="${t.id}" class="pizza__card card ${t.class}">\n              <div class="card__img-cont">\n                <img class="card__img" src="${t.imgSrc}" alt="${t.name}}">\n              </div>\n              <div class="card__title">\n                <h3>${t.name}</h3>\n              </div>\n              <div class="card__description">\n                <h4>\n                  ${t.description}\n                </h4>\n              </div>\n              <div class="card__footer">\n                <img class="card__hryvnia" src="./img/icons/hryvnia.svg" alt="hryvnia">\n                <span class="card__price">${t.price}</span>\n                <img class="card__hryvnia-red" src="./img/icons/hryvnia-red.svg" alt="hryvnia">\n                <span class="card__sale-price">${t.salePrice}*  </span>\n                \n              </div>\n            </div>\n          `)})})}"/order.html"===document.location.pathname?order.classList.add("_active"):order.classList.remove("_active"),renderPizza();let cart=JSON.parse(localStorage.getItem("CART"))||[];function addToCart(e,t){const a=e.target;if(a.classList.contains("card__btn")||a.classList.contains("card__cart-icon")){const t=a.closest(".pizza__card").dataset.pid;addFlyImgToCart(a,t),e.preventDefault()}if(cart.some(e=>e.id===t))changeNumberOfUnits("plus",t);else{const e=productsPizza.find(e=>e.id===t);cart.push({...e,numberOfUnits:1})}setTimeout(updateCart,500)}function renderCartItems(){[cartListContainer,deliveryList].forEach(e=>{e.innerHTML="",cart.forEach(t=>{e.innerHTML+=`\n          <hr>\n          <div data-cart-pid="${t.id}" class="basket__item">\n            <img class="basket__item-img" src="${t.imgSrc}" alt="${t.name}">\n            <div class="basket__details">\n              <input class="basket__titleAndQuantityInput" type="hidden" name="pizza_name[]" " value="">\n              <span class="basket__title">${t.name}</span>\n              <div class="basket__cost">\n                  \n                  <div class="order__quantity">\n                    <div class="order__minus-quantity quantity-img" onclick="changeNumberOfUnits('minus', '${t.id}')">\n                    </div>\n                    <span class="order__current-quantity basket__quantity">${t.numberOfUnits}</span>\n                    <div class="order__plus-quantity quantity-img" onclick="changeNumberOfUnits('plus', '${t.id}')">\n                    </div>\n                  </div>\n                  <div class="order__multiply">X</div>\n                  <img class="basket__price-img" src="./img/icons/hryvnia-gray.svg" alt="hryvnia">\n                  <span class="basket__price">${todayHours>=11&&todayHours<14&&5===todayDay?t.salePrice:t.price}</span>\n                  <input type="hidden" name="" class="basket__price-current-input" value="" disabled>\n              </div>\n            </div>\n            <div class="basket__delete-btn" onclick="removeItemFromCart('${t.id}')">\n                <img class="basket__delete-img" src="./img/icons/close.svg" alt="delete">\n            </div>\n          </div>\n        `})})}function changeNumberOfUnits(e,t){cart=cart.map(a=>{let i=a.numberOfUnits;return a.id===t&&("plus"===e?i++:"minus"===e&&i>1&&i--),{...a,numberOfUnits:i}}),updateCart()}function removeItemFromCart(e){cart=cart.filter(t=>t.id!==e),updateCart()}function updateCart(){renderCartItems(),renderSubtotal(),localStorage.setItem("CART",JSON.stringify(cart)),disableOrderBtn(),orderPizzaNameAndUnits()}function renderSubtotal(){let e=0,t=0,a=0;cart.forEach(i=>{e+=i.price*i.numberOfUnits,a+=i.salePrice*i.numberOfUnits,t+=i.numberOfUnits}),totalPriceInCart.innerHTML=e+" грн",totalItemsInCart.innerHTML=t,todayHours>=11&&todayHours<14&&0!==todayDay&&(totalPriceInCart.innerHTML=a+' грн - "Щасливі Години"')}function addFlyImgToCart(e,t){if(!e.classList.contains("_hold")){e.classList.add("_hold"),e.classList.add("_fly");const a=document.querySelector(".actions__basket"),i=document.querySelector(`[data-pid="${t}"]`).querySelector(".card__img"),n=i.cloneNode(!0),s=i.offsetWidth,r=i.offsetHeight,c=i.getBoundingClientRect().top,o=i.getBoundingClientRect().left;n.setAttribute("class","_flyImage _ibg"),n.style.cssText=`\n      left: ${o}px;\n      top: ${c}px;\n      width: ${s}px;\n      height: ${r}px;\n    `,document.body.append(n);const d=a.getBoundingClientRect().left,l=a.getBoundingClientRect().top;n.style.cssText=`\n      left: ${d}px;\n      top: ${l}px;\n      width: 0px;\n      height: 0px;\n      opacity:0;\n    `,n.addEventListener("transitionend",(function(){e.classList.contains("_fly")&&(n.remove(),e.classList.remove("_fly"))})),e.classList.remove("_hold")}}function checkOrderList(){const e=document.querySelector(".col-2__list"),t=document.querySelector(".order__btn");e.children.length<=0?(t.disabled=!0,t.classList.add("_disabled")):(t.disabled=!1,t.classList.remove("_disabled"))}$(".pizza__controls .buttons").click((function(){$(this).addClass("button-active").siblings().removeClass("button-active");let e=$(this).attr("data-filter");"classico"==e?($(".pizza .classico").fadeIn(400),$(".pizza .card").not("."+e).fadeOut(200)):($(".pizza .card").not("."+e).fadeOut(200),$(".pizza .card").filter("."+e).fadeIn(400).css("display","flex"))})),$(".coffee-beans__controls .buttons").click((function(){$(this).addClass("button-active").siblings().removeClass("button-active");let e=$(this).attr("data-filter");"mix"==e?($(".coffee-beans .mix").fadeIn(400),$(".coffee-beans .card").not("."+e).fadeOut(200)):($(".coffee-beans .card").not("."+e).fadeOut(200),$(".coffee-beans .card").filter("."+e).fadeIn(400).css("display","flex"))}));const $basket=$(".basket");$basket.click((function(){$(".basket__list").toggleClass("_active")}));const $burgerIcon=$(".header__burger");function orderPizzaNameAndUnits(){let e="";cart.forEach(t=>{e+=`${t.name} ${t.numberOfUnits}шт; `}),inputHiddenField.forEach(t=>t.value=e)}function disableOrderBtn(){submitOrder.forEach(e=>{0===cart.length?(e.setAttribute("disabled","disabled"),e.classList.add("_disabled")):(e.removeAttribute("disabled"),e.classList.remove("_disabled"))})}$burgerIcon.click((function(){$(this).toggleClass("_active"),$("body").toggleClass("_stop-scrolling")})),$(".header__bottom a").click(()=>{$burgerIcon.hasClass("_active")&&($burgerIcon.toggleClass("_active"),$("body").toggleClass("_stop-scrolling"))}),$(window).on("load scroll",(function(){$(window).scrollTop()>60?$("header .header__bottom").addClass("header-active"):$("header .header__bottom").removeClass("header-active"),$("section").each((function(){let e=$(this).height(),t=$(this).offset().top-200,a=$(window).scrollTop(),i=$(this).attr("id");a>=t&&a<t+e&&($(".header__navbar ul li a").removeClass("active"),$(".header__navbar").find(`[href="./${i}.html"]`).addClass("active"))})),$(window).scrollTop()>0?$("#scroll-up").show():$("#scroll-up").hide()})),$(".scroll-up").on("click",(function(){return $("html, body").animate({scrollTop:0},"slow"),!1})),$(".time-block__timepicker").timepicker({timeFormat:"HH:mm",minTime:"11:00",maxTime:"18:00",interval:15});