const pizzaContainer=document.querySelector(".pizza__container"),cartListContainer=document.querySelector(".basket__item-cont"),totalItemsInCart=document.querySelector(".actions__basket-quantity");function renderPizza(){productsPizza.forEach(t=>{pizzaContainer.innerHTML+=`\n    <div data-pid="${t.id}" class="pizza__card card ${t.class}">\n      <div class="card__img-cont">\n        <img class="card__img" src="${t.imgSrc}" alt="${t.name}}">\n      </div>\n      <div class="card__title">\n        <h3>${t.name}</h3>\n      </div>\n      <div class="card__description">\n        <h4>\n          ${t.description}\n        </h4>\n      </div>\n      <div class="card__footer">\n        <img class="card__hryvnia" src="./img/icons/hryvnia.svg" alt="hryvnia">\n        <span class="card__price">${t.price}</span>\n        <button onclick="addToCart('${t.id}')" class="card__btn">До Кошика</button>\n      </div>\n    </div>\n    `})}renderPizza();let cart=JSON.parse(localStorage.getItem("CART"))||[];function addToCart(t){if(cart.some(e=>e.id===t))changeNumberOfUnits("plus",t);else{const e=productsPizza.find(e=>e.id===t);cart.push({...e,numberOfUnits:1})}updateCart()}function renderCartItems(){cartListContainer.innerHTML="",cart.length>0&&cart.forEach(t=>{cartListContainer.innerHTML+=`\n        <div data-cart-pid="${t.id}" class="basket__item">\n          <img class="basket__item-img" src="${t.imgSrc}" alt="${t.name}">\n          <div class="basket__details">\n            <input class="basket__titleAndQuantityInput" type="hidden" name="pizza_name[]" " value="">\n            <span class="basket__title">${t.name}</span>\n            <div class="basket__cost">\n                \n                <div class="order__quantity">\n                  <div class="order__minus-quantity quantity-img" onclick="changeNumberOfUnits('minus', '${t.id}')">\n                  </div>\n                  <span class="order__current-quantity basket__quantity">${t.numberOfUnits}</span>\n                  <div class="order__plus-quantity quantity-img" onclick="changeNumberOfUnits('plus', '${t.id}')">\n                  </div>\n                </div>\n                <div class="order__multiply">X</div>\n                <img class="basket__price-img" src="./img/icons/hryvnia-gray.svg" alt="hryvnia">\n                <span class="basket__price">${t.price}</span>\n                <input type="hidden" name="" class="basket__price-current-input" value="" disabled>\n            </div>\n          </div>\n          <div class="basket__delete-btn" onclick="removeItemFromCart('${t.id}')">\n              <img class="basket__delete-img" src="./img/icons/close.svg" alt="delete">\n          </div>\n        </div>\n        <hr>\n      `})}function changeNumberOfUnits(t,e){cart=cart.map(a=>{let n=a.numberOfUnits;return a.id===e&&("plus"===t?(n++,console.log("plus",n)):"minus"===t&&(console.log("minus"),n--)),{...a,numberOfUnits:n}}),updateCart()}function removeItemFromCart(t){console.log("remove"),cart=cart.filter(e=>e.id!==t),updateCart(),console.log(cart)}function updateCart(){renderCartItems(),renderSubtotal(),localStorage.setItem("CART",JSON.stringify(cart))}function renderSubtotal(){let t=0,e=0;cart.forEach(a=>{t+=a.price*a.numberOfUnits,e+=a.numberOfUnits}),console.log(t),totalItemsInCart.innerHTML=e}function documentActions(t){const e=t.target;if(e.closest(".header__navbar")||e.closest(".logo")){const t=document.querySelector(".order"),e=document.querySelector(".page");t.classList.remove("_active"),e.style.display="block"}if(e.classList.contains("card__btn")){const a=e.closest(".pizza__card").dataset.pid;addFlyImgToCart(e,a),t.preventDefault()}}function addFlyImgToCart(t,e){if(!t.classList.contains("_hold")){t.classList.add("_hold"),t.classList.add("_fly");const a=document.querySelector(".actions__basket"),n=document.querySelector(`[data-pid="${e}"]`).querySelector(".card__img"),s=n.cloneNode(!0),i=n.offsetWidth,c=n.offsetHeight,o=n.getBoundingClientRect().top,r=n.getBoundingClientRect().left;s.setAttribute("class","_flyImage _ibg"),s.style.cssText=`\n    left: ${r}px;\n    top: ${o}px;\n    width: ${i}px;\n    height: ${c}px;\n  `,document.body.append(s);const l=a.getBoundingClientRect().left,d=a.getBoundingClientRect().top;s.style.cssText=`\n    left: ${l}px;\n    top: ${d}px;\n    width: 0px;\n    height: 0px;\n    opacity:0;\n  `,s.addEventListener("transitionend",(function(){t.classList.contains("_fly")&&(s.remove(),t.classList.remove("_fly"))}))}}function checkOrderList(){const t=document.querySelector(".col-2__list"),e=document.querySelector(".order__btn");t.children.length<=0?(e.disabled=!0,e.classList.add("_disabled")):(e.disabled=!1,e.classList.remove("_disabled"))}updateCart(),$(".pizza__controls .buttons").click((function(){$(this).addClass("button-active").siblings().removeClass("button-active");let t=$(this).attr("data-filter");"classico"==t?($(".pizza .classico").fadeIn(400),$(".pizza .card").not("."+t).fadeOut(200)):($(".pizza .card").not("."+t).fadeOut(200),$(".pizza .card").filter("."+t).fadeIn(400).css("display","flex"))})),$(".coffee-beans__controls .buttons").click((function(){$(this).addClass("button-active").siblings().removeClass("button-active");let t=$(this).attr("data-filter");"mix"==t?($(".coffee-beans .mix").fadeIn(400),$(".coffee-beans .card").not("."+t).fadeOut(200)):($(".coffee-beans .card").not("."+t).fadeOut(200),$(".coffee-beans .card").filter("."+t).fadeIn(400).css("display","flex"))})),document.addEventListener("click",documentActions),document.querySelector(".col-1__order-type").addEventListener("click",t=>{const e=document.querySelector(".col-1__toGo-active"),a=document.querySelector(".col-1__delivery-cont_toGo"),n=document.querySelector(".col-1__delivery-active"),s=document.querySelector(".col-1__delivery-cont_del");(t.target.classList.contains("col-1__delivery-cont_toGo")||t.target.classList.contains("col-1__delivery-toGo-btn")||t.target.classList.contains("col-1__delivery-toGo"))&&(e.classList.add("_active"),a.classList.add("_active"),n.classList.remove("_active"),s.classList.remove("_active")),(t.target.classList.contains("col-1__delivery-cont_del")||t.target.classList.contains("col-1__delivery-del-btn")||t.target.classList.contains("col-1__delivery-del"))&&(n.classList.add("_active"),s.classList.add("_active"),e.classList.remove("_active"),a.classList.remove("_active"))});const $basket=$(".basket");$basket.click((function(){$(".basket__list").toggleClass("_active")}));const $burgerIcon=$(".header__burger");$burgerIcon.click((function(){$(this).toggleClass("_active"),$("body").toggleClass("_stop-scrolling")})),$(".header__bottom a").click(()=>{$burgerIcon.hasClass("_active")&&($burgerIcon.toggleClass("_active"),$("body").toggleClass("_stop-scrolling"))}),jQuery(document).ready((function(){$("#phone").mask("+380 (99) 999-99-99"),jQuery(".order__btn").click((function(){var t=$("form");if(t.valid()){var e=t.attr("action");jQuery.ajax({url:e,type:"post",dataType:"html",success:function(t){alert("Заявка відправлена")},error:function(){t.find(".status").html("серверная ошибка")}})}}))})),$(window).on("load scroll",(function(){$(window).scrollTop()>60?$("header .header__bottom").addClass("header-active"):$("header .header__bottom").removeClass("header-active"),$("section").each((function(){let t=$(this).height(),e=$(this).offset().top-200,a=$(window).scrollTop(),n=$(this).attr("id");a>=e&&a<e+t&&($(".header__navbar ul li a").removeClass("active"),$(".header__navbar").find(`[href="#${n}"]`).addClass("active"))})),$(window).scrollTop()>0?$("#scroll-up").show():$("#scroll-up").hide()}));const loader=document.querySelector(".loader");window.addEventListener("load",()=>{loader.classList.add("_hide"),setTimeout(()=>{loader.remove()},600)}),$(".scroll-up").on("click",(function(){return $("html, body").animate({scrollTop:0},"slow"),!1}));